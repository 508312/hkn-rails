<%# http://wiki.github.com/mislav/will_paginate/ajax-pagination %>
<h1>Listing contacts</h1>

<div id="results">
<div id="spinner">&nbsp;</div>
<%= will_paginate @contacts, :class => "pagination ajax" %>

<table class="table">
 <tr class="pagination">
    <th><%= sort_link 'Name', 'name' %></th>
    <th><%= sort_link 'Email', 'email' %></th>
    <th>Office Phone</th>
    <th>Cell Phone</th>
    <th><%= sort_link 'Company', 'companies.name' %></th>
    <th>Comments</th>
  </tr>

<% for contact in @contacts %>
  <tr>
    <td><%=h contact.name %></td>
    <td><%=h contact.email %></td>
    <td><%=h contact.phone %></td>
    <td><%=h contact.cellphone %></td>
    <td><%=h contact.company.name if contact.company %></td>
    <td><%=h contact.comments %></td>
    <td><%= link_to 'Show', contact %></td>
    <td><%= link_to 'Edit', edit_contact_path(contact) %></td>
    <td><%= link_to 'Destroy', contact, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
</table>
</div>

<br />

<%= link_to 'New contact', new_contact_path %>

<%= ajaxify_links('pagination') %>